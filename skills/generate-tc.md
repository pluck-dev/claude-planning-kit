# TC(테스트 케이스) 생성 스킬

## 개요
기능명세서 + 화면설계서를 기반으로 체계적인 테스트 케이스 문서를 생성한다.
- 기능 단위 TC (단위/통합 테스트)
- 화면 단위 TC (E2E 테스트용 시나리오)
- 비즈니스 플로우 TC (크로스 기능 시나리오)

## 호출
```
/generate-tc                       ← 전체 TC 생성 (미착수 순차)
/generate-tc SC-012                ← 특정 화면의 TC
/generate-tc 회원관리              ← 특정 기능의 TC
/generate-tc loop 3                ← 미착수 3개만 처리
```

---

## 1. 핵심 원칙

### TC = 기능명세서 + 화면설계서 기반
```
절대 TC를 "상상"으로 작성하지 않는다.
반드시 기능명세서와 화면설계서를 먼저 읽고, 실제 명세된 기능만 TC로 만든다.
```

### TC 레벨 분류
```
Level 1: Smoke Test     ← 핵심 기능 동작 확인 (로그인, 메뉴 이동)
Level 2: Critical Path  ← 주요 비즈니스 플로우 (회원 등록→상품 구매→결제)
Level 3: Comprehensive  ← 엣지케이스, 권한, 에러 처리 포함
Level 4: Edge Case      ← 경계값, 동시성, 대량 데이터
```

### 문서-코드 싱크
```
docs/functional-spec/*.md  →  docs/tc/*.md  →  tests/e2e/*.spec.ts
기능명세가 변경되면 TC도 함께 업데이트
```

---

## 2. 파일/폴더 구조

### docs/tc/ 디렉토리
```
docs/tc/
├── PROGRESS.md              ← TC 생성 진행 추적
├── 00-TC-개요.md            ← TC 전략, 범위, 우선순위
├── 01-인증.md               ← 로그인/로그아웃 TC
├── 02-대시보드.md           ← 대시보드 TC
├── 03-회원관리.md           ← 회원 CRUD TC
├── 04-상품관리.md           ← 상품 CRUD TC
├── 05-매출관리.md           ← 결제/매출 TC
├── 06-스케줄관리.md         ← 예약/스케줄 TC
├── 07-락커관리.md           ← 락커 TC
├── 08-직원관리.md           ← 직원/KPI TC
├── 09-수입지출관리.md       ← 재무 TC
├── 10-출입관리.md           ← QR 출입 TC
├── 11-계약관리.md           ← 전자계약 TC
├── 12-상담관리.md           ← 상담 TC
├── 13-보고서.md             ← 리포트 TC
├── 14-알림.md               ← 알림 TC
├── 15-지점관리.md           ← 지점 TC
├── 16-설정.md               ← 설정 TC
├── 20-회원앱.md             ← 회원앱 전체 TC
└── 90-크로스기능.md         ← 비즈니스 플로우 통합 TC
```

### 네이밍: 기능명세서 번호와 일치
- 관리자: 01~16
- 회원앱: 20~29
- 크로스기능: 90~99

---

## 3. 작업 워크플로우 (서브에이전트 병렬)

### Step 0: 정보 수집 (병렬)

**Agent A: 기능명세서 분석** (subagent_type: Explore)
```
대상 기능의 기능명세서를 읽고 분석:
1. docs/functional-spec/[번호]-[이름].md
2. API 엔드포인트 목록 (method + path)
3. 비즈니스 로직 (조건, 검증 규칙)
4. 권한 매트릭스 (역할별 접근 권한)
5. 에러 케이스 목록
6. 데이터 모델 (필수/선택 필드, 제약조건)

결과: TC에 반영할 기능 + API + 비즈니스 규칙
```

**Agent B: 화면설계서 분석** (subagent_type: Explore)
```
대상 화면의 화면설계서를 읽고 분석:
1. docs/screen-design/[번호]-[이름].md
2. UI 요소 목록 (버튼, 폼, 테이블, 모달)
3. 사용자 인터랙션 플로우
4. 상태 전환 (loading → data/empty/error)
5. 네비게이션 경로
6. 입력 검증 규칙

결과: TC에 반영할 UI 동작 + 사용자 시나리오
```

**Agent C: 코드 확인** (subagent_type: Explore)
```
실제 구현된 코드를 확인:
1. 페이지 컴포넌트 (src/app/(admin)/[page]/page.tsx)
2. API 라우트 (src/app/api/[endpoint]/route.ts)
3. 실제 구현된 검증 로직
4. 에러 핸들링 패턴
5. 인증/권한 미들웨어

결과: 명세서와 코드 불일치 여부 + 실제 동작 확인
```

### Step 1: TC 문서 생성
수집된 정보를 기반으로 TC 문서를 작성한다.

### Step 2: 검증 + 진행사항 업데이트
- 기능명세와 TC 매핑 확인
- PROGRESS.md 업데이트

---

## 4. TC 문서 형식

### TC 문서 템플릿
```markdown
# [기능명] 테스트 케이스

> 기능명세서: docs/functional-spec/[번호]-[이름].md
> 화면설계서: docs/screen-design/[번호]-[이름].md
> 코드: fitgenie/src/app/(admin)/[page]/

## 테스트 범위
- 대상 화면: [화면 목록]
- 대상 API: [API 목록]
- 대상 역할: [역할 목록]

---

## TC-[번호]-[순번]: [테스트 제목]

| 항목 | 내용 |
|------|------|
| **ID** | TC-012-001 |
| **레벨** | L2 (Critical Path) |
| **유형** | 기능 / UI / API / 보안 |
| **전제조건** | - 관리자 계정으로 로그인 상태 |
| **테스트 데이터** | - 회원 3명 이상 등록 |

### 테스트 단계
| Step | 동작 | 기대 결과 |
|------|------|-----------|
| 1 | 회원관리 메뉴 클릭 | 회원 목록 페이지 표시 |
| 2 | 검색창에 "홍길동" 입력 | 실시간 필터링, 매칭 결과 표시 |
| 3 | 검색 결과 0건 | "검색 결과가 없습니다" 안내 표시 |

### API 검증
| Method | Endpoint | 요청 | 기대 응답 |
|--------|----------|------|-----------|
| GET | /api/members?search=홍길동 | query: search | 200 + 필터된 목록 |

### 에러 케이스
| 조건 | 기대 동작 |
|------|-----------|
| 네트워크 오류 | 에러 메시지 + 재시도 버튼 |
| 권한 없음 | 403 → 접근 불가 안내 |
```

---

## 5. TC 카테고리별 체크리스트

### 인증/권한 TC
- [ ] 정상 로그인 (올바른 자격증명)
- [ ] 로그인 실패 (잘못된 비밀번호)
- [ ] 로그인 실패 (존재하지 않는 계정)
- [ ] 세션 만료 후 자동 리다이렉트
- [ ] 비인증 사용자 접근 차단
- [ ] 역할별 메뉴/기능 접근 제한
- [ ] 로그아웃 후 보호 페이지 접근 불가

### CRUD TC (목록형 기능 공통)
- [ ] 목록 조회 (데이터 있음)
- [ ] 목록 조회 (데이터 없음 → Empty State)
- [ ] 목록 로딩 상태 (Skeleton)
- [ ] 검색/필터 (결과 있음)
- [ ] 검색/필터 (결과 없음)
- [ ] 페이지네이션 (다음/이전)
- [ ] 정렬 (컬럼 클릭)
- [ ] 상세 조회 (정상)
- [ ] 상세 조회 (존재하지 않는 ID → 404)
- [ ] 등록 (필수 필드 모두 입력)
- [ ] 등록 (필수 필드 누락 → 검증 에러)
- [ ] 수정 (정상)
- [ ] 수정 (권한 없음)
- [ ] 삭제 (확인 모달 → 삭제)
- [ ] 삭제 (확인 모달 → 취소)
- [ ] 삭제 (연관 데이터 있음 → 경고)

### 결제/매출 TC (금액 관련)
- [ ] 정상 결제 처리
- [ ] 결제 취소/환불
- [ ] 부분 환불
- [ ] 분할 결제
- [ ] 결제 실패 (잔액 부족)
- [ ] 결제 실패 (카드 오류)
- [ ] 금액 계산 정확성 (할인, 세금)
- [ ] 동시 결제 (동일 회원)

### 반응형/접근성 TC
- [ ] 데스크톱 레이아웃 정상
- [ ] 모바일 레이아웃 정상
- [ ] 키보드 네비게이션
- [ ] 스크린 리더 호환

---

## 6. 우선순위 매핑

### 기능별 TC 우선순위
| 기능 | Smoke | Critical | Comprehensive | 합계(예상) |
|------|-------|----------|---------------|-----------|
| 인증 | 3 | 5 | 8 | ~16 |
| 회원관리 | 3 | 10 | 20 | ~33 |
| 상품관리 | 2 | 8 | 15 | ~25 |
| 매출관리 | 3 | 12 | 25 | ~40 |
| 스케줄관리 | 2 | 10 | 20 | ~32 |
| 락커관리 | 2 | 6 | 10 | ~18 |
| 직원관리 | 2 | 6 | 12 | ~20 |
| 회원앱 | 3 | 8 | 15 | ~26 |

### 실행 순서 권장
```
1차: Smoke Test (L1) → 모든 기능 기본 동작 확인
2차: Critical Path (L2) → 주요 비즈니스 플로우
3차: Comprehensive (L3) → 엣지케이스 포함
4차: Edge Case (L4) → 경계값, 동시성
```

---

## 7. PROGRESS.md 자동 업데이트

작업 시작/완료 시 반드시 docs/tc/PROGRESS.md를 업데이트:
- `[ ]` → `[~]` (착수)
- `[~]` → `[x]` (완료)
- TC 개수 집계 (Smoke/Critical/Comprehensive)

---

## 8. 주의사항

- 기능명세서에 없는 기능의 TC를 작성하지 않는다
- 코드와 명세서가 불일치하면 [!] 표시 후 사용자에게 알린다
- TC ID는 기능 번호-순번 형식 (TC-012-001)
- 각 TC에 레벨(L1~L4) 반드시 표기
- API TC에는 요청/응답 예시 필수
- E2E 자동화 가능 여부 태그 표시 (🤖 자동화 가능 / 👤 수동 필요)
